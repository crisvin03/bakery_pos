{% extends 'core/base.html' %}
{% block content %}
<style>
  /* Page background */
  .login-hero {
    min-height: 100vh;
    display: grid;
    place-items: center;
    background:
      radial-gradient(1000px 600px at 0% 100%, rgba(255,214,150,.22), transparent 60%),
      radial-gradient(900px 500px at 100% 0%, rgba(255,143,178,.18), transparent 60%),
      #fff;
  }

  /* Card */
  .login-card {
    max-width: 460px;
    border: 1px solid rgba(0,0,0,.06);
    box-shadow: 0 18px 40px rgba(16,24,40,.10);
    border-radius: 18px;
  }
  .brand-title { letter-spacing:.4px }

  /* Pill inputs */
  .pill-input { border: 1px solid rgba(0,0,0,.12); }
  .pill-input .form-control {
    border: none;
    background: transparent;
    box-shadow: none;
    padding-top: .8rem; padding-bottom: .8rem;
  }

  /* Primary button â€” tuned for readability in all states */
  .btn-honey {
    background-color: #f0a001;   /* honey */
    border-color: #f0a001;
    color: #fff;                  /* high contrast text */
    font-weight: 600;
    letter-spacing: .2px;
    text-shadow: 0 1px 0 rgba(0,0,0,.25); /* keeps text readable on hover/active */
    cursor: pointer;
  }
  .btn-honey:hover,
  .btn-honey:focus {
    background-color: #d58f00;   /* slightly darker on hover */
    border-color: #d58f00;
    color: #fff;
  }
  .btn-honey:active {
    background-color: #bf7f00;   /* pressed state */
    border-color: #bf7f00;
    color: #fff;
  }
  .btn-honey:focus-visible {
    box-shadow: 0 0 0 .2rem rgba(240,160,1,.28), 0 .25rem .5rem rgba(0,0,0,.08);
    outline: none;
  }
  .btn-honey:disabled {
    background-color: #bf7f00;
    border-color: #bf7f00;
    color: #fff;
    opacity: .9;                 /* keep text readable while disabled */
  }
</style>

<div class="login-hero">
  <div class="container py-4">
    <div class="row g-5 align-items-center">
      <!-- Illustration (left) -->
      <div class="col-lg-7 d-none d-lg-block">
        <div class="mx-auto" style="max-width:720px">
          <svg viewBox="0 0 980 520" width="100%" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Bakery illustration">
            <defs>
              <linearGradient id="g1" x1="0" x2="1">
                <stop offset="0" stop-color="#ff8fb2"/>
                <stop offset="1" stop-color="#ffa8c7"/>
              </linearGradient>
              <linearGradient id="g2" x1="0" x2="0" y1="0" y2="1">
                <stop offset="0" stop-color="#6f3d13"/>
                <stop offset="1" stop-color="#3e220a"/>
              </linearGradient>
              <linearGradient id="g3" x1="0" x2="0" y1="0" y2="1">
                <stop offset="0" stop-color="#ffe7a3"/>
                <stop offset="1" stop-color="#ffd873"/>
              </linearGradient>
              <filter id="s" x="-10%" y="-10%" width="120%" height="120%">
                <feDropShadow dx="0" dy="6" stdDeviation="12" flood-opacity=".15"/>
              </filter>
            </defs>
            <ellipse cx="320" cy="250" rx="310" ry="210" fill="#ffe6ef"/>
            <ellipse cx="740" cy="290" rx="220" ry="170" fill="#ffe6cc"/>
            <g filter="url(#s)">
              <path d="M140,380 h360 a20,20 0 0 1 20,20 v40 a20,20 0 0 1 -20,20 h-360 a20,20 0 0 1 -20,-20 v-40 a20,20 0 0 1 20,-20z" fill="#f6b8c8"/>
              <path d="M170,380 l40,80 h220 l40,-80z" fill="url(#g1)"/>
              <path d="M160,360 c40,-60 280,-60 320,0 10,15 -40,26 -160,28 -120,-2 -170,-13 -160,-28z" fill="url(#g3)"/>
              <circle cx="210" cy="430" r="12" fill="#5a76ff"/><circle cx="240" cy="445" r="10" fill="#4c66e6"/>
            </g>
            <g transform="translate(520,80)" filter="url(#s)">
              <rect x="0" y="60" rx="28" ry="28" width="260" height="300" fill="url(#g2)"/>
              <rect x="-10" y="40" rx="34" ry="34" width="280" height="60" fill="#e5d0b2"/>
              <path d="M-10,60 h280 v10 c-40,35 -240,35 -280,0z" fill="#fff1cc"/>
              <path d="M40,100 c30,40 150,40 180,0" stroke="#e1b35a" stroke-width="8" fill="none"/>
              <circle cx="225" cy="320" r="8" fill="#2b1708"/>
            </g>
            <g>
              <rect x="100" y="260" width="28" height="60" rx="14" fill="#f7a9a8"/>
              <circle cx="114" cy="248" r="14" fill="#f7a9a8"/>
              <rect x="86" y="228" width="56" height="14" rx="7" fill="#ff5a7a"/>
            </g>
            <g transform="translate(810,250) rotate(-6)">
              <rect x="-14" y="20" width="28" height="60" rx="14" fill="#f7a9a8"/>
              <circle cx="0" cy="10" r="14" fill="#f7a9a8"/>
              <rect x="-110" y="0" width="120" height="16" rx="8" fill="#ffcc7a"/>
            </g>
          </svg>
        </div>
      </div>

      <!-- Form (right) -->
      <div class="col-lg-5">
        <div class="card login-card ms-lg-auto">
          <div class="card-body p-4 p-md-5">
            <h2 class="h4 brand-title mb-1">ALVAREZ BAKERY</h2>
            <p class="text-secondary mb-3">Welcome back. Please sign in to continue.</p>

            {# Small red alert only (wrong credentials) #}
            {% if form and form.non_field_errors %}
              <div class="alert alert-danger py-2 px-3 small mb-3" role="alert">
                {% for err in form.non_field_errors %}
                  {{ err }}{% if not forloop.last %}<br>{% endif %}
                {% endfor %}
              </div>
            {% endif %}

            <form method="post" novalidate id="loginForm">
              {% csrf_token %}

              <!-- Username -->
              <div class="input-group rounded-pill pill-input mb-3">
                <span class="input-group-text bg-transparent border-0 ps-3">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-secondary">
                    <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.33 0-8 2.17-8 5v1h16v-1c0-2.83-3.67-5-8-5Z"/>
                  </svg>
                </span>
                <input
                  type="text"
                  name="username"
                  id="username"
                  class="form-control"
                  placeholder="Username"
                  autocomplete="username"
                  required
                  value="{{ form.data.username|default:'' }}"
                >
              </div>

              <!-- Password -->
              <div class="input-group rounded-pill pill-input mb-4">
                <span class="input-group-text bg-transparent border-0 ps-3">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-secondary">
                    <path d="M17 9h-1V7a4 4 0 0 0-8 0v2H7a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2Zm-3 0H10V7a2 2 0 0 1 4 0Z"/>
                  </svg>
                </span>
                <input
                  type="password"
                  name="password"
                  id="password"
                  class="form-control"
                  placeholder="Password"
                  autocomplete="current-password"
                  required
                >
              </div>

              <button class="btn btn-honey text-white w-100 py-2 fw-semibold rounded-pill" id="submitBtn" title="Sign in">
                <span class="btn-text">Sign in</span>
                <span class="btn-spinner d-none align-middle ms-2 spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              </button>
            </form>
          </div>
        </div>
      </div>
      <!-- /Form -->
    </div>
  </div>
</div>

<script>
  // Disable button & show tiny spinner on submit (prevents double clicks)
  (function () {
    const form = document.getElementById('loginForm');
    const btn  = document.getElementById('submitBtn');
    const txt  = btn.querySelector('.btn-text');
    const spn  = btn.querySelector('.btn-spinner');

    form.addEventListener('submit', function () {
      btn.disabled = true;
      spn.classList.remove('d-none');
      txt.textContent = 'Signing in...';
    });
  })();
</script>
{% endblock %}
