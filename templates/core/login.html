{% extends 'core/base.html' %}
{% block content %}
<style>
  /* Page background */
  .login-hero {
    min-height: 100vh;
    display: grid;
    place-items: center;
    background-image: url('https://crisvin03.github.io/bakery_pos/static/images/background.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
  }
  
  /* Optional: Add a subtle overlay to ensure text readability */
  .login-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.3);
    z-index: 0;
  }
  
  .login-hero > .container {
    position: relative;
    z-index: 1;
  }

  /* Card */
  .login-card {
    max-width: 460px;
    border: 1px solid rgba(0,0,0,.06);
    box-shadow: 0 18px 40px rgba(16,24,40,.10);
    border-radius: 18px;
  }
  .brand-title { letter-spacing:.4px }

  /* Pill inputs */
  .pill-input { border: 1px solid rgba(0,0,0,.12); }
  .pill-input .form-control {
    border: none;
    background: transparent;
    box-shadow: none;
    padding-top: .8rem; padding-bottom: .8rem;
  }

  /* Primary button â€” tuned for readability in all states */
  .btn-honey {
    background-color: #f0a001;   /* honey */
    border-color: #f0a001;
    color: #fff;                  /* high contrast text */
    font-weight: 600;
    letter-spacing: .2px;
    text-shadow: 0 1px 0 rgba(0,0,0,.25); /* keeps text readable on hover/active */
    cursor: pointer;
  }
  .btn-honey:hover,
  .btn-honey:focus {
    background-color: #d58f00;   /* slightly darker on hover */
    border-color: #d58f00;
    color: #fff;
  }
  .btn-honey:active {
    background-color: #bf7f00;   /* pressed state */
    border-color: #bf7f00;
    color: #fff;
  }
  .btn-honey:focus-visible {
    box-shadow: 0 0 0 .2rem rgba(240,160,1,.28), 0 .25rem .5rem rgba(0,0,0,.08);
    outline: none;
  }
  .btn-honey:disabled {
    background-color: #bf7f00;
    border-color: #bf7f00;
    color: #fff;
    opacity: .9;                 /* keep text readable while disabled */
  }
</style>

<div class="login-hero">
  <div class="container py-4">
    <div class="row justify-content-center">
      <!-- Form (centered) -->
      <div class="col-lg-5 col-md-7 col-sm-9">
        <div class="card login-card mx-auto">
          <div class="card-body p-4 p-md-5">
            <h2 class="h4 brand-title mb-1">ALVAREZ BAKERY</h2>
            <p class="text-secondary mb-3">Welcome back. Please sign in to continue.</p>

            {# Small red alert only (wrong credentials) #}
            {% if form and form.non_field_errors %}
              <div class="alert alert-danger py-2 px-3 small mb-3" role="alert">
                {% for err in form.non_field_errors %}
                  {{ err }}{% if not forloop.last %}<br>{% endif %}
                {% endfor %}
              </div>
            {% endif %}

            <form method="post" novalidate id="loginForm">
              {% csrf_token %}

              <!-- Username -->
              <div class="input-group rounded-pill pill-input mb-3">
                <span class="input-group-text bg-transparent border-0 ps-3">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-secondary">
                    <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.33 0-8 2.17-8 5v1h16v-1c0-2.83-3.67-5-8-5Z"/>
                  </svg>
                </span>
                <input
                  type="text"
                  name="username"
                  id="username"
                  class="form-control"
                  placeholder="Username"
                  autocomplete="username"
                  required
                  value="{{ form.data.username|default:'' }}"
                >
              </div>

              <!-- Password -->
              <div class="input-group rounded-pill pill-input mb-4">
                <span class="input-group-text bg-transparent border-0 ps-3">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-secondary">
                    <path d="M17 9h-1V7a4 4 0 0 0-8 0v2H7a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2Zm-3 0H10V7a2 2 0 0 1 4 0Z"/>
                  </svg>
                </span>
                <input
                  type="password"
                  name="password"
                  id="password"
                  class="form-control"
                  placeholder="Password"
                  autocomplete="current-password"
                  required
                >
              </div>

              <button class="btn btn-honey text-white w-100 py-2 fw-semibold rounded-pill" id="submitBtn" title="Sign in">
                <span class="btn-text">Sign in</span>
                <span class="btn-spinner d-none align-middle ms-2 spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Disable button & show tiny spinner on submit (prevents double clicks)
  (function () {
    const form = document.getElementById('loginForm');
    const btn  = document.getElementById('submitBtn');
    const txt  = btn.querySelector('.btn-text');
    const spn  = btn.querySelector('.btn-spinner');

    form.addEventListener('submit', function () {
      btn.disabled = true;
      spn.classList.remove('d-none');
      txt.textContent = 'Signing in...';
    });
  })();
</script>
{% endblock %}
